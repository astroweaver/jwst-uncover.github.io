(function(e){var c=e(window),a=e('body'),j=e('#wrapper'),i=e('#header'),h=e('#footer'),b=e('#main'),f=b.children('article'),k,g,d,l,m,n;breakpoints({xlarge:['1281px','1680px'],large:['981px','1280px'],medium:['737px','980px'],small:['481px','736px'],xsmall:['361px','480px'],xxsmall:[null,'360px']}),c.on('load',function(){window.setTimeout(function(){a.removeClass('is-preload')},100)}),browser.name=='ie'&&c.on('resize.flexbox-fix',function(){clearTimeout(k),k=setTimeout(function(){j.prop('scrollHeight')>c.height()?j.css('height','auto'):j.css('height','100vh')},250)}).triggerHandler('resize.flexbox-fix'),g=325,d=!1,b._show=function(l,j){var e=f.filter('#'+l),k;if(e.length==0)return;if(d||typeof j!='undefined'&&j===!0){a.addClass('is-switching'),a.addClass('is-article-visible'),f.removeClass('active'),i.hide(),h.hide(),b.show(),e.show(),e.addClass('active'),d=!1,setTimeout(function(){a.removeClass('is-switching')},j?1e3:0);return}d=!0,a.hasClass('is-article-visible')?(k=f.filter('.active'),k.removeClass('active'),setTimeout(function(){k.hide(),e.show(),setTimeout(function(){e.addClass('active'),c.scrollTop(0).triggerHandler('resize.flexbox-fix'),setTimeout(function(){d=!1},g)},25)},g)):(a.addClass('is-article-visible'),setTimeout(function(){i.hide(),h.hide(),b.show(),e.show(),setTimeout(function(){e.addClass('active'),c.scrollTop(0).triggerHandler('resize.flexbox-fix'),setTimeout(function(){d=!1},g)},25)},g))},b._hide=function(j){var e=f.filter('.active');if(!a.hasClass('is-article-visible'))return;if(typeof j!='undefined'&&j===!0&&history.pushState(null,null,'#'),d){a.addClass('is-switching'),e.removeClass('active'),e.hide(),b.hide(),h.show(),i.show(),a.removeClass('is-article-visible'),d=!1,a.removeClass('is-switching'),c.scrollTop(0).triggerHandler('resize.flexbox-fix');return}d=!0,e.removeClass('active'),setTimeout(function(){e.hide(),b.hide(),h.show(),i.show(),setTimeout(function(){a.removeClass('is-article-visible'),c.scrollTop(0).triggerHandler('resize.flexbox-fix'),setTimeout(function(){d=!1},g)},25)},g)},f.each(function(){var a=e(this);e('<div class="close">Close</div>').appendTo(a).on('click',function(){location.hash=''}),a.on('click',function(a){a.stopPropagation()})}),a.on('click',function(c){a.hasClass('is-article-visible')&&b._hide(!0)}),c.on('keyup',function(c){switch(c.keyCode){case 27:a.hasClass('is-article-visible')&&b._hide(!0);break;default:break}}),c.on('hashchange',function(a){location.hash==''||location.hash=='#'?(a.preventDefault(),a.stopPropagation(),b._hide()):f.filter(location.hash).length>0&&(a.preventDefault(),a.stopPropagation(),b._show(location.hash.substr(1)))}),'scrollRestoration'in history?history.scrollRestoration='manual':(l=0,m=0,n=e('html,body'),c.on('scroll',function(){l=m,m=n.scrollTop()}).on('hashchange',function(){c.scrollTop(l)})),b.hide(),f.hide(),location.hash!=''&&location.hash!='#'&&c.on('load',function(){b._show(location.hash.substr(1),!0)})})(jQuery)